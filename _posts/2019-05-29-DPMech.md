---
title:  "Differential Privacy Part-II: DP Mechanisms"
layout: posts
---

~~~ruby
function AboveThreshold(D, {fi}, T, ε):
        Tˆ=T+Lap(2/ε)
        for Each query i do Let νi = Lap(4/ε)
              if fi(D) + νi ≥ Tˆ then
                     Output ai = ⊤.
                     Halt.
              else
                     Output ai = ⊥.
              end if
        end for
~~~

<p style="text-align:justify">This blog post is meant to introduce you to a few differential private mechanisms. This assumes you have some understanding of
   the definition and aims of differential privacy. This is not an exhaustive list or indepth analysis. Just introduction to few
   mechanisms to get an understanding of DP and why mechanisms based on DP work. It also motivates the privacy-utility tradeoffs that could be made.For proofs as to how the mechanism bounds are derived you can refer to the book <a target="__blank" href="https://www.cis.upenn.edu/~aaroth/Papers/privacybook.pdf">The Algorithmic Foundations of Differential Privacy.</a> All of the mechanisms described in the section are DP (<img height="20" width="20" src="https://cdn2.iconfinder.com/data/icons/greek-latin-symbols/24/epsilon-128.png">,0)
</p>

<p style="text-align:justify">There is no single mechanism that guarantees privacy and utility over several possible queries and problems , but there are some class of queries and common DP algorithms that provide a solution with decent utility-privacy tradeoff. </p>

<p style="text-align:justify">To understand the mechanisms we will consider it from query-release problem point of view where analyst could analyze the database in form of queries. Similar to querying a regular SQL database</p>

<h2>Laplace Mechanism</h2>

<br />
<center>
<img height="200px" width="450px" src="https://www.researchgate.net/profile/Arti_Arya2/publication/281467551/figure/fig1/AS:455000661991426@1485492019207/Differential-Privacy.png">
</center>
<br />

<p style="text-align:justify">Laplace mechanism is a DP mechanism where you add a Laplacian noise to a given value.Laplacian noise sampled for each datapoint can be given by the distribution Lap(sensitivity/<img height="20" width="20" src="https://cdn2.iconfinder.com/data/icons/greek-latin-symbols/24/epsilon-128.png">)  Higher the sensitivity of given datapoint larger the noise. This also implies that DP is useful only when the databases are large enough since for smaller database a promising utility-privacy tradeoff cannot be made.</p>


<div style="text-align:center">
<img height="200px" width="450px" src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e1/Laplace_distribution_pdf.svg/1280px-Laplace_distribution_pdf.svg.png">
</div>

<p>The above is a Laplacian distribution. It is a common tool in DP due to its sharp peak</p>

<h2>Counting Query</h2>
<p style="text-align:justify">Counting queries are simple queries where the count of instances having particular attributes are retrieved. Since each individual row contributes a instance of one by itself , counting queries have a sensitivity of 1. We can mask this by using the Laplace mechanism.

<h2>Histogram Query</h2>
<center>
<img height="200px" width="300px" src="https://png.pngtree.com/svg/20170418/759297958b.png">
</center>
<p style="text-align:justify">Historgram queries are queries in which the output consists of disjoint cells representing counts over range of values. Since each cell value changes by addition/removal of a row of data it also has a sensitivity of 1. To each histogram cell we add a indepedently draw Laplace noise.
</p>

<h2>Noisy Max</h2>
<p style="text-align:justify">Report maximum value after adding noise to the data. The Laplace mechanism or Gaussain mechanism could be used. This is called LNmax (Laplacian Noise Maximum) or GNmax (Gaussian Noise Maximum). From priniciple of Total Information Recovery we can keep the maximum value private but only report the index of the values.</p>
<h2>Exponential Mechanism</h2>
<p style="text-align:justify">Exponential Mechanism can be useful when perturbation of the values by themselves could lead to decreased utility. So instead from a possible range of values from private dataset for a query , we select the value with probability of normalized exponential of utility score. Utility is a function which gives how useful a given range of value is to a query. Exponential could be a great way to discount for utility , selecting values with higher utility and discarding values with lower utility. It also ensures when there exists values of almost equal utility the utility guarantees are still as high as possible while maintaing privacy
To learn more about Exponential mechanism watch this amazing <a href="https://www.youtube.com/watch?v=-BmTopi6faY"></a> talk by  ... in Microsoft Research.</p>
<p>In exponential mechanism the probability of a given choice/number is given by exponential of a scoring function. If two or more choices have almost the same scores they have almost equal chances of being randomly picked which sacrifices utility to a certain extent but by a small loss since score functions of both are nearly equal. But , having such choices also provides a privacy bound.</p>


<p style="text-align:justify">Check out <a href="https://kamathhrishi.github.io/Blog/Posts/DPComposition">Part-III</a> of the tutorials where I will explain how DP algorithms privacy guarantees hold good over multiple queries</p>
